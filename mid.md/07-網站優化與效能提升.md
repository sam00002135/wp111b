## 7.1 了解網站效能優化的重要性
網站效能優化是指針對網站的速度、響應時間和資源利用進行優化的過程。它對於提供優質的使用者體驗、提高網站的可用性和提升搜索引擎排名都至關重要。

網站效能優化的重要性體現在以下幾個方面：

使用者體驗：網站的速度直接影響使用者的體驗。快速的響應時間可以提高使用者的滿意度，減少使用者的等待時間，增加使用者的黏性，促使使用者更多地探索和使用網站。

搜索引擎優化：搜索引擎優化是提高網站在搜索引擎結果頁面中排名的過程。網站的速度是搜索引擎優化的一個重要因素，搜索引擎通常會優先顯示速度較快的網站。因此，優化網站的速度可以提高網站在搜索引擎中的可見性，增加流量和曝光度。

資源利用效率：優化網站效能可以減少網站對資源的需求，包括伺服器資源、網絡帶寬等。減少對資源的需求可以降低運營成本，提高網站的可擴展性和穩定性。

## 7.2 減少 HTTP 請求數量
HTTP 請求數量指的是網站在加載時所發出的請求數量。減少請求數量是網站效能優化的一個重要策略，可以加快網站的加載速度，提高使用者體驗。

減少 HTTP 請求數量的方法包括：

合併檔案：將多個 CSS 或 JavaScript 檔案合併為一個，減少請求數量。
使用 CSS Sprite：將多個小圖片合併為一張大圖片，通過 CSS 的背景定位來顯示不同的圖片，減少圖片請求數量。
使用內聯資源：將較小的 CSS 或 JavaScript 代碼直接內聯到 HTML 文件中，減少對外部檔案的請求。

使用圖片資源嵌入：將小型圖片轉換為 Base64 編碼的資料 URL，直接嵌入到 CSS 或 HTML 中，減少對圖片的單獨請求。
使用 CSS 和 JavaScript 壓縮工具：壓縮 CSS 和 JavaScript 檔案，減少檔案大小，從而減少請求的傳輸時間。

## 7.3 壓縮和縮小資源
壓縮和縮小網站資源是一種有效的網站效能優化策略，可以減少資源的文件大小，從而提高網站的加載速度。

以下是幾種常用的壓縮和縮小資源的方法：

Gzip 壓縮：對於文本類型的資源，例如 HTML、CSS、JavaScript 檔案，可以使用 Gzip 壓縮來減少檔案大小。伺服器會將檔案壓縮後再傳送給瀏覽器，瀏覽器再解壓縮以正常顯示。

減少空白字符：在 HTML、CSS 和 JavaScript 檔案中，可以刪除多餘的空白字符、換行和縮進，以減少檔案大小。

圖片壓縮：對於圖片資源，可以使用壓縮算法來減少檔案大小。常用的圖片壓縮方法包括使用線上工具或圖像處理軟件來壓縮圖片，或者使用圖片格式的壓縮算法，如 JPEG 的壓縮品質、PNG 的無損壓縮等。

## 7.4 快取與預載資源
快取和預載資源是一種利用瀏覽器緩存機制來提高網站效能的方法。

快取：通過設置適當的快取頭部（例如 Cache-Control 和 Expires），網站可以指示瀏覽器在一段時間內將特定的資源保存在本地緩存中。當用戶再次訪問網站時，瀏覽器可以直接從緩存中載入資源，從而節省了對伺服器的請求時間。

預載資源：通過使用預載機制，網站可以在頁面加載完成前預先載入一些可能會使用到的資源，從而提前加載所需資源，減少延遲。

以下是一些常見的預載資源的方法：

預載圖片：在頁面加載完成前，使用 <link> 標籤的 rel 屬性設置為 "preload"，並指定 as="image"，以預載圖片資源。

```html
<link rel="preload" as="image" href="path/to/image.jpg">
```

預載字體：如果網站使用自定義字體，可以使用 <link> 標籤的 rel 屬性設置為 "preload"，並指定 as="font"，以預載字體資源。

```html
<link rel="preload" as="font" href="path/to/font.woff2" type="font/woff2" crossorigin>
```

預載腳本：如果有一些需要提前加載的 JavaScript 檔案，可以使用 <link> 標籤的 rel 屬性設置為 "preload"，並指定 as="script"，以預載腳本資源。

```html
<link rel="preload" as="script" href="path/to/script.js">
```

透過快取和預載資源的技術，可以大幅提升網站的加載速度，提供更好的使用者體驗。

## 7.5 優化圖片
圖片是網站中常見的資源，它們佔用了大量的資源空間。優化圖片可以減少其檔案大小，從而提高網站的加載速度。

以下是一些常見的圖片優化技巧：

壓縮圖片：使用壓縮算法來減少圖片檔案大小。可以使用專業的圖片編輯軟件或在線工具來壓縮圖片，以平衡圖片品質和檔案大小。

選擇適當的圖片格式：根據圖片的內容和使用情境，選擇適當的圖片格式。例如，JPEG 格式適合保存複雜的圖片，而 PNG 格式適合保存透明圖片。

使用圖片縮略圖：對於需要展示大尺寸圖片的網站，可以使用縮略圖的方式，僅在用戶點擊或需要查看詳細圖片時再載入原始圖片。這樣可以節省用戶的流量和加載時間。

圖片懶加載：圖片懶加載是一種延遲加載圖片的技術，僅當圖片進入可視區域時才開始加載。這可以減少初始頁面的加載時間，提高整體的網站效能。可以使用 JavaScript 函數或使用現有的 JavaScript 庫（例如，LazyLoad）來實現圖片懶加載。

使用適當的圖片尺寸：根據網頁設計的需求，在上傳圖片之前，確保調整圖片的尺寸與顯示的實際尺寸相符。避免在網頁中使用過大的圖片，這將增加加載時間。根據不同的設備和螢幕尺寸，可以使用媒體查詢或適應性圖片來提供不同尺寸的圖片。

## 7.6 代碼優化技巧
代碼優化是針對網站的 HTML、CSS 和 JavaScript 代碼進行優化，以減少代碼的體積、提高執行效率和加載速度。

以下是一些常見的代碼優化技巧：

壓縮和合併代碼：對於 HTML、CSS 和 JavaScript 檔案，可以使用壓縮工具（如UglifyJS、CSSNano）來去除不必要的空白字符、註釋和重複代碼，並將多個檔案合併為一個，從而減少檔案大小和請求數量。

減少重繪和回流：避免過度使用引起瀏覽器重繪和回流的操作，例如頻繁的 DOM 操作、動態改變元素的尺寸和位置等。優化 CSS 樣式和 JavaScript 代碼，以減少對網頁佈局的影響，提高瀏覽器的渲染效率。

延遲加載 JavaScript：將不需要立即執行的 JavaScript 代碼延遲加載，可以使用 async 或 defer 屬性，從而避免阻塞頁面的加載。

使用瀏覽器緩存：通過使用瀏覽器的緩存機制，將常用的資源（例如外部腳本和圖片）保存在本地緩存中。這樣在用戶再次訪問網站時，可以直接從緩存中讀取資源，減少對伺服器的請求。

優化運行效率：審查和優化 JavaScript 代碼，避免過多的循環、遞迴或低效的操作。使用性能優良的函數和算法，減少不必要的計算和資源消耗。定期進行代碼檢查和性能測試，以確保代碼的效率和優化。

使用瀏覽器開發者工具：瀏覽器開發者工具提供了一系列用於分析網站性能和優化的工具。使用這些工具來測量網站的加載時間、分析資源的使用情況，並找出潛在的性能瓶頸和改進的方向。

透過代碼優化技巧，可以提高網站的效能和加載速度，提供更好的使用者體驗和提升網站的競爭力。